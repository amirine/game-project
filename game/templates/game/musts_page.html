{% extends "layout/base.html" %}
{% load static %}

{% block title %}My Musts{% endblock %}

{% block stylesheet %}

    <!-- Extra Page Stylesheet -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.0/css/bootstrap-slider.min.css">

{% endblock %}


{% block content %}

    <!-- Page Content but navbar -->
    <div id="wrapper" class="toggled d-flex flex-grow-1">

        <!-- Page Content -->
        <div id="page-content" class="container-fluid align-items-center">

            <!-- First row after navbar: button > search input > blank space -->
            <div class="row">

                <!-- Column for search input -->
                <div class="col-sm-8 col-md-8 col-xl-8 align-items-center">
                    <h2>My Musts</h2>
                </div>

            </div>


            <!-- Row for basic content: game cards -->
            <div class="row justify-content-center h-100 align-items-center">

                <!-- Column to center game cards -->
                <div class="col-xl-11 col-md-11 col-sm-11">

                    {% if page_obj %}

                        <!-- Row with content: 3 cards per row -->
                        <div class="row row-cols-xl-6 row-cols-md-4 row-cols-sm-1 p-3 align-items-center">

                            <!-- Game cards -->
                            {% for user_game in page_obj %}
                                <div class="col-xl-2 col-md-3 col-sm-12 d-flex justify-content-center p-2">

                                    <!-- Card image -->
                                    <div class="card w-100">
                                        <img class="card-img-top card-image-cover-musts"
                                             src="{% if user_game.game.get_game_info_musts.cover.image_id %}
                                                {{ user_game.game.get_game_info_musts.cover.image_id }}{% else %}
                                          https://www.beddingwarehouse.com.au/wp-content/uploads/2016/01/placeholder-featured-image.png
                                          {% endif %}"
                                             alt="Card image cap">
                                        <div class="card-body row w-100 p-2 d-flex justify-content-between">
                                            <div class="col-xl-7 col-sm-7 col-md-7 p-0 musts-card-line">

                                                <!-- Game title -->
                                            <a href="{% url 'detail_page' user_game.game.get_game_info_musts.id %}">
                                                <h6 class="card-title m-0">
                                                    {{ user_game.game.get_game_info_musts.name }}
                                                </h6>
                                            </a>
                                                 <!-- Game genres -->
                                                {% if user_game.game.get_game_info_musts.genres %}
                                                    <p class="card-text text-muted small m-0">
                                                        {% for genre in user_game.game.get_game_info_musts.genres %}
                                                        {{ genre.name }} {% endfor %}</p>
                                                {% else %}
                                                    <p class="card-text text-muted small m-0">No genres</p>
                                                {% endif %}

                                                <p class="card-text text-muted small" id="users-added">
                                                    Users added: {{ user_game.game.get_active_users_number }}
                                                </p>

                                            </div>
                                            <div class="col-xl-5 col-sm-5 col-md-5 p-0">

                                                <!-- Game button: must or unmust -->
                                                <button class="btn btn-danger must-button
                                                    {% if not user_game.game.is_deleted %}active{% endif %}"
                                                        type="button"
                                                        data-url_root="{% url 'musts_page' %}"
                                                        data-game_id="{{ user_game.game.get_game_info_musts.id }}"
                                                        name="game_id">
                                                    {% if user_game.game.is_deleted %}Must
                                                    {% else %}Unmust{% endif %}
                                                </button>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            {% endfor %}

                        </div> <!-- Row content (cards) end -->

                    {% else %}
                        <p class="text-dark text-center">No games found</p>
                    {% endif %}

                </div><!-- Column to center cards end -->

            </div><!-- Row for basic content end -->


            <!-- Pagination -->
            <div class="row justify-content-center">
                <ul class="pagination justify-content-center">
                    <div class="d-grid gap-2 d-md-block">
                        {% for page_number in page_obj.paginator.page_range %}
                                <button onclick="location.href='?page={{ page_number }}'"
                                        class="btn {% if page_number == page_obj.number %}btn-dark{% else %}
                                        btn-danger{% endif %}" type="button">{{ page_number }}
                                </button>
                        {% endfor %}
                    </div>
                </ul>
            </div>


        </div><!-- Page content but sidebar end -->

    </div><!-- Page content including sidebar end -->

{% endblock %}


{% block script %}

    <!-- Script for must button -->
    <script type="text/javascript" src={% static 'game/js/must_button.js' %}></script>

{% endblock %}
